<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ClientVault ‚Äî Single Throw Marketing</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ‚îÄ‚îÄ Single Throw Marketing Brand ‚îÄ‚îÄ */
:root {
  --navy:        #1A5276;
  --navy-dark:   #14405C;
  --navy-light:  #1e6290;
  --navy-pale:   #EBF4FA;
  --green:       #6B8F71;
  --green-pale:  #EDF3EE;
  --grey:        #6E6F71;
  --grey-pale:   #F5F5F5;
  --border:      #D4E4EF;
  --border-dark: #B0CAD9;
  --text:        #1C2D38;
  --text-muted:  #6E6F71;
  --bg:          #F2F6FA;
  --white:       #ffffff;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Nunito', 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); height: 100vh; display: flex; overflow: hidden; font-size: 14px; }
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--grey-pale); }
::-webkit-scrollbar-thumb { background: var(--border-dark); border-radius: 3px; }

/* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
#sidebar { width: 245px; background: var(--navy); display: flex; flex-direction: column; flex-shrink: 0; overflow-y: auto; }
.logo { padding: 22px 20px 18px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.logo-box { border: 2.5px solid rgba(255,255,255,0.9); border-radius: 9px; padding: 8px 14px; display: inline-block; margin-bottom: 6px; }
.logo-line1 { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 15px; letter-spacing: 0.2em; color: #fff; text-transform: uppercase; line-height: 1.1; }
.logo-line2 { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 15px; letter-spacing: 0.2em; color: var(--green); text-transform: uppercase; line-height: 1.1; }
.logo-line3 { font-family: 'Rajdhani', sans-serif; font-weight: 600; font-size: 10px; letter-spacing: 0.35em; color: rgba(255,255,255,0.7); text-transform: uppercase; margin-top: 3px; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 3px; }
.logo-sub { font-size: 10px; color: rgba(255,255,255,0.4); letter-spacing: 0.1em; text-transform: uppercase; margin-top: 8px; }
.section-label { font-size: 9px; color: rgba(255,255,255,0.35); letter-spacing: 0.18em; text-transform: uppercase; padding: 14px 20px 5px; font-family: 'Rajdhani', sans-serif; font-weight: 600; }
.client-btn { background: transparent; border: none; border-left: 3px solid transparent; cursor: pointer; width: 100%; text-align: left; padding: 10px 20px; transition: all 0.15s; display: flex; align-items: center; gap: 10px; color: rgba(255,255,255,0.65); font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 500; }
.client-btn:hover { background: var(--navy-light); color: #fff; border-left-color: var(--green); }
.client-btn.active { background: var(--navy-dark); color: #fff; border-left-color: var(--green); font-weight: 600; }
.dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.sidebar-footer { margin-top: auto; padding: 12px 20px; border-top: 1px solid rgba(255,255,255,0.08); font-size: 11px; color: rgba(255,255,255,0.3); font-family: 'Rajdhani', sans-serif; letter-spacing: 0.05em; }

/* ‚îÄ‚îÄ Main ‚îÄ‚îÄ */
#main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

/* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
#header { padding: 20px 30px 0; border-bottom: 2px solid var(--border); background: var(--white); flex-shrink: 0; }
.header-top { display: flex; align-items: center; gap: 12px; margin-bottom: 14px; flex-wrap: wrap; }
.client-dot-lg { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.client-title { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 21px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--navy); }
.tag { font-size: 10px; padding: 3px 9px; border-radius: 4px; background: var(--navy-pale); color: var(--navy); letter-spacing: 0.06em; text-transform: uppercase; font-weight: 700; white-space: nowrap; }
.header-actions { margin-left: auto; display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.search-input { background: var(--bg); border: 1.5px solid var(--border); color: var(--text); font-family: 'Nunito', sans-serif; font-size: 13px; padding: 7px 12px; border-radius: 5px; outline: none; width: 165px; }
.search-input:focus { border-color: var(--navy); box-shadow: 0 0 0 2px rgba(26,82,118,0.1); }
.icon-btn { background: var(--white); border: 1.5px solid var(--border); color: var(--grey); cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 600; padding: 7px 16px; border-radius: 5px; transition: all 0.15s; display: flex; align-items: center; gap: 6px; white-space: nowrap; }
.icon-btn:hover { border-color: var(--navy); color: var(--navy); background: var(--navy-pale); }
.icon-btn.primary { background: var(--navy); border-color: var(--navy); color: white; }
.icon-btn.primary:hover { background: var(--navy-light); }
.icon-btn.green { background: var(--green); border-color: var(--green); color: white; }
.icon-btn.green:hover { opacity: 0.9; }

/* ‚îÄ‚îÄ Folder Tabs ‚îÄ‚îÄ */
.folder-tabs-row { display: flex; gap: 2px; align-items: flex-end; overflow-x: auto; padding-bottom: 0; }
.folder-tab { background: transparent; border: 1.5px solid transparent; border-bottom: none; cursor: pointer; padding: 8px 14px; border-radius: 5px 5px 0 0; font-family: 'Rajdhani', sans-serif; font-weight: 600; font-size: 12px; letter-spacing: 0.08em; text-transform: uppercase; transition: all 0.15s; color: var(--text-muted); display: flex; align-items: center; gap: 5px; white-space: nowrap; flex-shrink: 0; }
.folder-tab:hover { background: var(--navy-pale); color: var(--navy); }
.folder-tab.active { background: var(--white); border-color: var(--border); border-bottom-color: var(--white); color: var(--navy); margin-bottom: -2px; padding-bottom: 10px; }
.folder-count { border-radius: 3px; padding: 1px 6px; font-size: 10px; font-weight: 700; }
.add-folder-tab { background: transparent; border: 1.5px dashed var(--border); cursor: pointer; padding: 7px 12px; border-radius: 5px; font-family: 'Nunito', sans-serif; font-size: 12px; color: var(--text-muted); transition: all 0.15s; flex-shrink: 0; margin-bottom: 2px; }
.add-folder-tab:hover { border-color: var(--green); color: var(--green); }

/* ‚îÄ‚îÄ Content ‚îÄ‚îÄ */
#content { flex: 1; overflow-y: auto; padding: 24px 30px; background: var(--bg); }

/* ‚îÄ‚îÄ Upload Zone ‚îÄ‚îÄ */
.upload-zone { border: 2px dashed var(--border-dark); border-radius: 7px; padding: 28px; text-align: center; cursor: pointer; transition: all 0.2s; margin-bottom: 18px; background: var(--white); }
.upload-zone:hover, .upload-zone.drag { border-color: var(--navy); background: var(--navy-pale); }
.upload-zone p { font-size: 13px; color: var(--text-muted); margin-bottom: 3px; font-weight: 500; }
.upload-zone small { font-size: 11px; color: #aaa; }

/* ‚îÄ‚îÄ File Rows ‚îÄ‚îÄ */
.file-row { display: flex; align-items: center; gap: 12px; padding: 11px 16px; border-radius: 6px; background: var(--white); border: 1.5px solid var(--border); margin-bottom: 7px; transition: all 0.15s; cursor: pointer; }
.file-row:hover { border-color: var(--navy); box-shadow: 0 2px 8px rgba(26,82,118,0.08); transform: translateX(2px); }
.file-row.expanded { border-color: var(--navy); border-radius: 6px 6px 0 0; margin-bottom: 0; }
.file-icon { font-size: 18px; flex-shrink: 0; }
.file-info { flex: 1; overflow: hidden; }
.file-name { font-size: 13px; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--text); }
.file-meta { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
.file-actions { display: flex; align-items: center; gap: 8px; }
.small-btn { background: transparent; border: none; cursor: pointer; font-size: 13px; color: var(--text-muted); transition: color 0.15s; padding: 2px 5px; font-family: 'Nunito', sans-serif; }
.small-btn:hover { color: var(--navy); }
.small-btn.red:hover { color: #C0392B; }

/* ‚îÄ‚îÄ Comments Panel ‚îÄ‚îÄ */
.comments-panel { background: var(--navy-pale); border: 1.5px solid var(--navy); border-top: none; border-radius: 0 0 6px 6px; padding: 14px 16px; margin-bottom: 7px; }
.comment-item { background: var(--white); border-radius: 5px; padding: 10px 12px; margin-bottom: 8px; border-left: 3px solid var(--navy); }
.comment-author { font-size: 10px; color: var(--navy); font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 4px; font-family: 'Rajdhani', sans-serif; }
.comment-text { font-size: 13px; color: var(--text); line-height: 1.5; }
.comment-time { font-size: 10px; color: var(--text-muted); margin-top: 4px; }
.comment-input-row { display: flex; gap: 8px; margin-top: 10px; }
.comment-input { flex: 1; background: var(--white); border: 1.5px solid var(--border); color: var(--text); font-family: 'Nunito', sans-serif; font-size: 13px; padding: 8px 12px; border-radius: 5px; outline: none; }
.comment-input:focus { border-color: var(--navy); }
.comment-submit { background: var(--navy); color: white; border: none; cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 600; padding: 8px 16px; border-radius: 5px; }
.comment-submit:hover { background: var(--navy-light); }

/* ‚îÄ‚îÄ Contacts ‚îÄ‚îÄ */
.contacts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 14px; }
.contact-card { background: var(--white); border: 1.5px solid var(--border); border-radius: 7px; padding: 18px 16px; transition: all 0.15s; position: relative; }
.contact-card:hover { border-color: var(--navy); box-shadow: 0 3px 12px rgba(26,82,118,0.1); }
.contact-avatar { width: 42px; height: 42px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 18px; color: white; margin-bottom: 10px; }
.contact-name { font-size: 14px; font-weight: 700; color: var(--text); margin-bottom: 2px; }
.contact-role { font-size: 11px; color: var(--text-muted); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.05em; font-family: 'Rajdhani', sans-serif; font-weight: 600; }
.contact-detail { font-size: 12px; color: var(--text-muted); margin-bottom: 4px; display: flex; align-items: center; gap: 6px; }
.contact-del { position: absolute; top: 10px; right: 10px; background: none; border: none; color: var(--border-dark); cursor: pointer; font-size: 16px; display: none; transition: color 0.15s; }
.contact-card:hover .contact-del { display: block; }
.contact-del:hover { color: #C0392B; }
.add-contact-card { background: transparent; border: 2px dashed var(--border); border-radius: 7px; padding: 18px 16px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px; cursor: pointer; color: var(--text-muted); font-size: 13px; font-weight: 600; min-height: 120px; transition: all 0.15s; }
.add-contact-card:hover { border-color: var(--green); color: var(--green); background: var(--green-pale); }

/* ‚îÄ‚îÄ Contracts ‚îÄ‚îÄ */
.contract-row { display: flex; align-items: center; gap: 12px; padding: 13px 16px; border-radius: 6px; background: var(--white); border: 1.5px solid var(--border); margin-bottom: 7px; transition: all 0.15s; }
.contract-row:hover { border-color: var(--navy); box-shadow: 0 2px 8px rgba(26,82,118,0.08); transform: translateX(2px); }
.status-badge { font-size: 10px; padding: 3px 10px; border-radius: 4px; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; font-family: 'Rajdhani', sans-serif; }
.status-signed  { background: #E8F5E9; color: #2E7D32; }
.status-pending { background: #FFF8E1; color: #F57F17; }
.status-draft   { background: var(--grey-pale); color: var(--grey); }
.stat-card { background: var(--white); border: 1.5px solid var(--border); border-radius: 7px; padding: 14px 16px; text-align: center; }

/* ‚îÄ‚îÄ Dashboard ‚îÄ‚îÄ */
.dash-card { background: var(--white); border: 1.5px solid var(--border); border-radius: 7px; padding: 18px; }
.dash-card h3 { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 14px; letter-spacing: 0.06em; color: var(--navy); margin-bottom: 6px; text-transform: uppercase; }
.dash-card p { font-size: 12px; color: var(--text-muted); margin-bottom: 12px; line-height: 1.5; }
.dash-input { width: 100%; background: var(--bg); border: 1.5px solid var(--border); color: var(--text); font-family: 'Nunito', sans-serif; font-size: 13px; padding: 8px 12px; border-radius: 5px; outline: none; margin-bottom: 8px; }
.dash-input:focus { border-color: var(--navy); }
.dash-btn { background: var(--navy); color: white; border: none; cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 600; padding: 8px 16px; border-radius: 5px; transition: all 0.15s; }
.dash-btn:hover { background: var(--navy-light); }
.dash-btn.ghost { background: transparent; border: 1.5px solid var(--border); color: var(--grey); }
.dash-btn.ghost:hover { border-color: var(--navy); color: var(--navy); background: var(--navy-pale); }
.embed-wrapper { background: var(--white); border: 1.5px solid var(--border); border-radius: 7px; overflow: hidden; margin-bottom: 14px; }
.embed-toolbar { padding: 12px 16px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--border); flex-wrap: wrap; }
.embed-title { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 14px; color: var(--navy); text-transform: uppercase; letter-spacing: 0.06em; }
.embed-url-text { font-size: 11px; color: var(--text-muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 280px; }
.embed-actions { display: flex; gap: 6px; margin-left: auto; flex-wrap: wrap; }
.embed-wrapper iframe { width: 100%; height: 480px; border: none; display: block; }

/* ‚îÄ‚îÄ Misc ‚îÄ‚îÄ */
.empty-state { text-align: center; color: var(--border-dark); font-size: 13px; padding: 32px; font-weight: 500; }
.section-divider { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 11px; color: var(--text-muted); letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1.5px solid var(--border); }
.add-form { padding: 6px 8px; display: flex; gap: 6px; }
.add-input { flex: 1; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; font-family: 'Nunito', sans-serif; font-size: 12px; padding: 7px 10px; border-radius: 5px; outline: none; }
.add-input::placeholder { color: rgba(255,255,255,0.4); }
.add-input:focus { border-color: rgba(255,255,255,0.5); }
.add-submit { background: var(--green); color: white; border: none; cursor: pointer; font-size: 15px; padding: 6px 13px; border-radius: 5px; font-weight: 700; }

/* ‚îÄ‚îÄ Modals ‚îÄ‚îÄ */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(14,30,40,0.6); z-index: 100; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
.modal-overlay.show { display: flex; }
.modal { background: var(--white); border: 1.5px solid var(--border); border-radius: 10px; padding: 28px; width: 440px; max-width: 95vw; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(14,30,40,0.2); }
.modal h2 { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 20px; letter-spacing: 0.06em; text-transform: uppercase; color: var(--navy); margin-bottom: 4px; }
.modal-sub { font-size: 12px; color: var(--text-muted); margin-bottom: 20px; }
.modal-field { margin-bottom: 14px; }
.modal-label { font-size: 10px; color: var(--text-muted); font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; display: block; margin-bottom: 5px; font-family: 'Rajdhani', sans-serif; }
.modal-input { width: 100%; background: var(--bg); border: 1.5px solid var(--border); color: var(--text); font-family: 'Nunito', sans-serif; font-size: 13px; padding: 10px 12px; border-radius: 5px; outline: none; }
.modal-input:focus { border-color: var(--navy); box-shadow: 0 0 0 2px rgba(26,82,118,0.1); }
.modal-select { width: 100%; background: var(--bg); border: 1.5px solid var(--border); color: var(--text); font-family: 'Nunito', sans-serif; font-size: 13px; padding: 10px 12px; border-radius: 5px; outline: none; }
.modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
.btn-primary { background: var(--navy); color: white; border: none; cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 700; padding: 10px 22px; border-radius: 5px; }
.btn-primary:hover { background: var(--navy-light); }
.btn-ghost { background: transparent; border: 1.5px solid var(--border); color: var(--text-muted); cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 13px; padding: 10px 18px; border-radius: 5px; }
.btn-ghost:hover { border-color: var(--navy); color: var(--navy); }
.share-link-box { background: var(--bg); border: 1.5px solid var(--border); border-radius: 6px; padding: 10px 14px; font-size: 12px; color: var(--navy); margin-bottom: 14px; display: flex; align-items: center; justify-content: space-between; gap: 10px; word-break: break-all; }
.copy-btn { background: var(--navy); border: none; color: #fff; cursor: pointer; font-family: 'Nunito', sans-serif; font-size: 11px; font-weight: 700; padding: 5px 12px; border-radius: 4px; white-space: nowrap; }
.copy-btn:hover { background: var(--navy-light); }
.modal-divider { border: none; border-top: 1.5px solid var(--border); margin: 16px 0; }

/* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
.toast { position: fixed; bottom: 24px; right: 24px; background: var(--navy); color: white; font-family: 'Nunito', sans-serif; font-size: 13px; font-weight: 600; padding: 12px 20px; border-radius: 6px; z-index: 200; opacity: 0; transform: translateY(8px); transition: all 0.3s; pointer-events: none; box-shadow: 0 4px 20px rgba(26,82,118,0.3); }
.toast.show { opacity: 1; transform: translateY(0); }
</style>
</head>
<body>

<!-- Sidebar -->
<div id="sidebar">
  <div class="logo">
    <div class="logo-box">
      <div class="logo-line1">SINGLE</div>
      <div class="logo-line2">THROW</div>
      <div class="logo-line3">MARKETING</div>
    </div>
    <div class="logo-sub">Client Vault</div>
  </div>
  <div class="section-label">Clients</div>
  <div id="client-list"></div>
  <div id="add-area">
    <button class="client-btn" style="color:rgba(107,143,113,0.9);margin-top:2px" onclick="showAddClientForm()">
      <span style="font-size:16px;color:#6B8F71">+</span> Add Client
    </button>
  </div>
  <div class="sidebar-footer" id="sidebar-footer"></div>
</div>

<!-- Main -->
<div id="main">
  <div id="header">
    <div class="header-top">
      <div class="client-dot-lg" id="header-dot"></div>
      <span class="client-title" id="header-title"></span>
      <span class="tag" id="header-count"></span>
      <div class="header-actions">
        <input class="search-input" id="search" placeholder="Search‚Ä¶" oninput="renderContent()" />
        <button class="icon-btn" onclick="openShareModal()">‚Üó Share</button>
        <button class="icon-btn primary" id="action-btn">+ Upload</button>
      </div>
    </div>
    <div class="folder-tabs-row" id="folder-tabs"></div>
  </div>
  <div id="content"></div>
</div>

<!-- Share Modal -->
<div class="modal-overlay" id="share-modal">
  <div class="modal">
    <h2>‚Üó Share</h2>
    <p class="modal-sub">Share a link or send an email summary for <strong id="share-client-name"></strong>.</p>
    <div class="modal-field">
      <span class="modal-label">Shareable Link</span>
      <div class="share-link-box"><span id="share-link-text"></span><button class="copy-btn" onclick="copyLink()">Copy</button></div>
    </div>
    <hr class="modal-divider">
    <div class="modal-field">
      <span class="modal-label">Send Email Summary</span>
      <input class="modal-input" id="share-email" placeholder="client@email.com" />
    </div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeModal('share-modal')">Cancel</button>
      <button class="btn-primary" onclick="sendEmail()">‚úâ Open Email App</button>
    </div>
  </div>
</div>

<!-- Add Folder Modal -->
<div class="modal-overlay" id="folder-modal">
  <div class="modal">
    <h2>+ New Folder</h2>
    <p class="modal-sub">Create a custom folder for this client.</p>
    <div class="modal-field">
      <span class="modal-label">Folder Name</span>
      <input class="modal-input" id="new-folder-name" placeholder="e.g. Invoices, Assets, Reports‚Ä¶"
        onkeydown="if(event.key==='Enter')submitFolder();if(event.key==='Escape')closeModal('folder-modal')" />
    </div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeModal('folder-modal')">Cancel</button>
      <button class="btn-primary" onclick="submitFolder()">Create Folder</button>
    </div>
  </div>
</div>

<!-- Add Contact Modal -->
<div class="modal-overlay" id="contact-modal">
  <div class="modal">
    <h2>+ Add Contact</h2>
    <p class="modal-sub">Add a contact person for this client.</p>
    <div class="modal-field"><span class="modal-label">Full Name</span><input class="modal-input" id="c-name" placeholder="Jane Smith" /></div>
    <div class="modal-field"><span class="modal-label">Role / Title</span><input class="modal-input" id="c-role" placeholder="Marketing Manager" /></div>
    <div class="modal-field"><span class="modal-label">Email</span><input class="modal-input" id="c-email" placeholder="jane@company.com" /></div>
    <div class="modal-field"><span class="modal-label">Phone</span><input class="modal-input" id="c-phone" placeholder="+1 555 000 0000" /></div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeModal('contact-modal')">Cancel</button>
      <button class="btn-primary" onclick="submitContact()">Add Contact</button>
    </div>
  </div>
</div>

<!-- Add Contract Modal -->
<div class="modal-overlay" id="contract-modal">
  <div class="modal">
    <h2>+ Add Contract</h2>
    <p class="modal-sub">Track a contract for this client.</p>
    <div class="modal-field"><span class="modal-label">Contract Name</span><input class="modal-input" id="con-name" placeholder="Service Agreement 2025" /></div>
    <div class="modal-field"><span class="modal-label">Status</span>
      <select class="modal-select" id="con-status">
        <option value="draft">Draft</option>
        <option value="pending">Pending Signature</option>
        <option value="signed">Signed</option>
      </select>
    </div>
    <div class="modal-field"><span class="modal-label">Value</span><input class="modal-input" id="con-value" placeholder="$5,000" /></div>
    <div class="modal-field"><span class="modal-label">Date</span><input class="modal-input" id="con-date" type="date" /></div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeModal('contract-modal')">Cancel</button>
      <button class="btn-primary" onclick="submitContract()">Add Contract</button>
    </div>
  </div>
</div>

<!-- Dashboard URL Modal -->
<div class="modal-overlay" id="dash-modal">
  <div class="modal">
    <h2>üìä Embed Dashboard</h2>
    <p class="modal-sub">Paste your Looker Studio embed URL.</p>
    <div class="modal-field"><span class="modal-label">Dashboard Title</span><input class="modal-input" id="dash-title" placeholder="Q1 2025 Performance" /></div>
    <div class="modal-field">
      <span class="modal-label">Looker Studio Embed URL</span>
      <input class="modal-input" id="dash-url" placeholder="https://lookerstudio.google.com/embed/reporting/‚Ä¶" />
      <div style="font-size:11px;color:var(--text-muted);margin-top:6px">In Looker Studio ‚Üí File ‚Üí Share ‚Üí Embed report ‚Üí copy URL</div>
    </div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeModal('dash-modal')">Cancel</button>
      <button class="btn-primary" onclick="submitDashUrl()">Embed Dashboard</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>
<input type="file" id="file-input" multiple style="display:none" onchange="handleFileInput(this.files)" />

<script>
const DEFAULT_FOLDERS = ["Contacts","Dashboard","Files","QA Reports","Notes","Passwords","Design","Contracts"];
const PALETTE = ["#1A5276","#6B8F71","#2E86C1","#148F77","#6E6F71","#1A5276","#6B8F71","#2E86C1"];
const FOLDER_ICONS = { Files:"üìÅ", Notes:"üìù", Passwords:"üîí", Design:"üé®", "QA Reports":"‚úÖ", Contracts:"üìã", Contacts:"üë•", Dashboard:"üìä" };
const SPECIAL = ["Contracts","Contacts","Dashboard"];

function makeClient(name, color) {
  const files = {};
  DEFAULT_FOLDERS.filter(f=>!SPECIAL.includes(f)).forEach(f=>files[f]=[]);
  return { id:Date.now()+Math.random(), name, color, folders:[...DEFAULT_FOLDERS], files, contacts:[], contracts:[], dashboards:[] };
}

let clients = [
  (() => { return makeClient("JAG","#1A5276"); })(),
  (() => { return makeClient("Townsquare","#6B8F71"); })(),
];

let activeClient = clients[0].id;
let activeFolder = "Contacts";
let expandedFile = null;

const gc = () => clients.find(c=>c.id===activeClient);
const fmtSz = b => b<1024?b+" B":b<1048576?(b/1024).toFixed(1)+" KB":(b/1048576).toFixed(1)+" MB";
const fmtDate = ts => new Date(ts).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});
const fmtTime = ts => new Date(ts).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});

function fileEmoji(f) {
  if(f.type?.startsWith("image/")) return "üñº";
  if(f.type==="application/pdf"||f.name?.endsWith(".pdf")) return "üìÑ";
  if(f.name?.match(/\.zip|\.rar/i)) return "üì¶";
  if(f.type?.startsWith("video/")) return "üé¨";
  if(f.name?.match(/\.xls/i)) return "üìä";
  if(f.name?.match(/\.doc/i)) return "üìù";
  return "üìÅ";
}

function folderColor(f) {
  const colors = ["#1A5276","#6B8F71","#2E86C1","#148F77","#6E6F71","#1A8C99","#7D5A8A","#C0392B"];
  const c = gc();
  return colors[c.folders.indexOf(f) % colors.length];
}

function render() { renderSidebar(); renderHeader(); renderFolderTabs(); renderContent(); renderFooter(); }

function renderSidebar() {
  document.getElementById("client-list").innerHTML = clients.map(c => `
    <div style="position:relative;display:flex;align-items:center"
      onmouseenter="showDel('${c.id}')" onmouseleave="hideDel('${c.id}')">
      <button class="client-btn ${c.id===activeClient?'active':''}" onclick="selectClient('${c.id}')">
        <span class="dot" style="background:${c.color}"></span>
        <span style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${c.name}</span>
      </button>
      ${clients.length>1?`<button id="cdel-${c.id}" onclick="deleteClient('${c.id}')" style="position:absolute;right:10px;background:none;border:none;color:rgba(255,255,255,0.3);cursor:pointer;font-size:15px;display:none"
        onmouseover="this.style.color='#E74C3C'" onmouseout="this.style.color='rgba(255,255,255,0.3)'">√ó</button>`:''}
    </div>`).join('');
}
function showDel(id) { const e=document.getElementById('cdel-'+id); if(e) e.style.display='block'; }
function hideDel(id) { const e=document.getElementById('cdel-'+id); if(e) e.style.display='none'; }

function renderHeader() {
  const c=gc(); if(!c) return;
  document.getElementById('header-dot').style.background = c.color;
  document.getElementById('header-title').textContent = c.name;
  const total = Object.values(c.files).flat().length + c.contracts.length + c.contacts.length + c.dashboards.length;
  document.getElementById('header-count').textContent = total+' items';
  const btn = document.getElementById('action-btn');
  if(activeFolder==='Dashboard') { btn.textContent='+ Embed Dashboard'; btn.onclick=()=>openModal('dash-modal'); }
  else if(activeFolder==='Contacts') { btn.textContent='+ Add Contact'; btn.onclick=()=>openModal('contact-modal'); }
  else if(activeFolder==='Contracts') { btn.textContent='+ Add Contract'; btn.onclick=()=>openModal('contract-modal'); }
  else { btn.textContent='+ Upload'; btn.onclick=()=>document.getElementById('file-input').click(); }
}

function renderFolderTabs() {
  const c=gc(); if(!c) return;
  document.getElementById('folder-tabs').innerHTML =
    c.folders.map(f => {
      const isActive = f===activeFolder;
      const fc = folderColor(f);
      let count = f==='Contacts'?c.contacts.length:f==='Contracts'?c.contracts.length:f==='Dashboard'?c.dashboards.length:(c.files[f]||[]).length;
      return `<button class="folder-tab ${isActive?'active':''}" style="${isActive?`color:${fc}`:'color:var(--text-muted)'}" onclick="selectFolder('${f}')">
        ${FOLDER_ICONS[f]||'‚óÜ'} ${f}
        ${count>0?`<span class="folder-count" style="background:${isActive?fc:'var(--border)'};color:${isActive?'#fff':'var(--text-muted)'}">${count}</span>`:''}
      </button>`;
    }).join('') +
    `<button class="add-folder-tab" onclick="openModal('folder-modal')">+ folder</button>`;
}

function renderContent() {
  if(activeFolder==='Dashboard') renderDashboard();
  else if(activeFolder==='Contacts') renderContacts();
  else if(activeFolder==='Contracts') renderContracts();
  else renderFiles();
}

function renderFiles() {
  const c=gc(); if(!c) return;
  const search = document.getElementById('search').value.toLowerCase();
  const files = (c.files[activeFolder]||[]).filter(f=>f.name.toLowerCase().includes(search));
  const fc = folderColor(activeFolder);
  document.getElementById('content').innerHTML = `
    <div class="upload-zone" id="drop-zone"
      onclick="document.getElementById('file-input').click()"
      ondragover="handleDragOver(event)" ondragleave="handleDragLeave()" ondrop="handleDrop(event)">
      <div style="font-size:26px;margin-bottom:8px">${FOLDER_ICONS[activeFolder]||'üìÅ'}</div>
      <p>Drop files here or <span style="color:var(--navy);text-decoration:underline;cursor:pointer;font-weight:700">browse</span></p>
      <small>Uploading to ${activeFolder} ‚Üí ${c.name}</small>
    </div>
    ${files.length===0
      ? `<div class="empty-state">${search?'No files match your search.':'No files yet ‚Äî drop some above.'}</div>`
      : files.map(f => {
          const isExp = expandedFile===f.id;
          const cc = f.comments?.length||0;
          return `
            <div class="file-row ${isExp?'expanded':''}" onclick="toggleExpand(${f.id})">
              <span class="file-icon">${fileEmoji(f)}</span>
              <div class="file-info">
                <div class="file-name">${f.name}</div>
                <div class="file-meta">${fmtSz(f.size)} ¬∑ ${fmtDate(f.added)}</div>
              </div>
              <span class="tag" style="background:${fc}22;color:${fc}">${activeFolder}</span>
              ${cc>0?`<span class="tag">üí¨ ${cc}</span>`:''}
              <div class="file-actions" onclick="event.stopPropagation()">
                <a class="small-btn" href="${f.url}" download="${f.name}" title="Download">‚Üì</a>
                <button class="small-btn red" onclick="removeFile(${f.id})" title="Delete">√ó</button>
              </div>
            </div>
            ${isExp?`<div class="comments-panel">
              ${!cc?'<div style="font-size:12px;color:var(--text-muted);margin-bottom:10px">No comments yet.</div>'
                :f.comments.map(cm=>`<div class="comment-item"><div class="comment-author">${cm.author}</div><div class="comment-text">${cm.text}</div><div class="comment-time">${fmtTime(cm.ts)}</div></div>`).join('')}
              <div class="comment-input-row">
                <input class="comment-input" id="cinput-${f.id}" placeholder="Add a comment‚Ä¶" onkeydown="if(event.key==='Enter')submitComment(${f.id})" onclick="event.stopPropagation()" />
                <button class="comment-submit" onclick="event.stopPropagation();submitComment(${f.id})">Post</button>
              </div>
            </div>`:''}`; }).join('')}`;
}

function renderDashboard() {
  const c=gc();
  document.getElementById('content').innerHTML = `
    <div style="display:flex;gap:14px;flex-wrap:wrap;margin-bottom:20px">
      <div class="dash-card" style="flex:1;min-width:260px">
        <h3>üìä Embed Looker Studio Dashboard</h3>
        <p>Paste your embed URL. In Looker Studio: <strong>File ‚Üí Share ‚Üí Embed report</strong> ‚Üí copy the URL.</p>
        <input class="dash-input" id="quick-dash-title" placeholder="Dashboard title‚Ä¶" />
        <input class="dash-input" id="quick-dash-url" placeholder="https://lookerstudio.google.com/embed/reporting/‚Ä¶" onkeydown="if(event.key==='Enter')quickAddDash()" />
        <button class="dash-btn" onclick="quickAddDash()">+ Embed Dashboard</button>
      </div>
      <div class="dash-card" style="flex:0 0 200px">
        <h3>üìÅ Upload File</h3>
        <p>Upload a PDF export or screenshot of your dashboard.</p>
        <button class="dash-btn ghost" onclick="document.getElementById('file-input').click()" style="width:100%">Upload File</button>
      </div>
    </div>
    ${c.files['Dashboard']?.length>0?`
      <div class="section-divider" style="margin-bottom:10px">Uploaded Files</div>
      ${c.files['Dashboard'].map(f=>{
        const isExp=expandedFile===f.id;
        const cc=f.comments?.length||0;
        return `<div class="file-row ${isExp?'expanded':''}" onclick="toggleExpand(${f.id})">
          <span class="file-icon">${fileEmoji(f)}</span>
          <div class="file-info"><div class="file-name">${f.name}</div><div class="file-meta">${fmtSz(f.size)} ¬∑ ${fmtDate(f.added)}</div></div>
          ${cc>0?`<span class="tag">üí¨ ${cc}</span>`:''}
          <div class="file-actions" onclick="event.stopPropagation()">
            <a class="small-btn" href="${f.url}" download="${f.name}">‚Üì</a>
            <button class="small-btn red" onclick="removeFileFromFolder(${f.id},'Dashboard')">√ó</button>
          </div>
        </div>
        ${isExp?`<div class="comments-panel">
          ${!cc?'<div style="font-size:12px;color:var(--text-muted);margin-bottom:10px">No comments yet.</div>':f.comments.map(cm=>`<div class="comment-item"><div class="comment-author">${cm.author}</div><div class="comment-text">${cm.text}</div><div class="comment-time">${fmtTime(cm.ts)}</div></div>`).join('')}
          <div class="comment-input-row"><input class="comment-input" id="cinput-${f.id}" placeholder="Add a comment‚Ä¶" onkeydown="if(event.key==='Enter')submitCommentInFolder(${f.id},'Dashboard')" onclick="event.stopPropagation()" /><button class="comment-submit" onclick="event.stopPropagation();submitCommentInFolder(${f.id},'Dashboard')">Post</button></div>
        </div>`:''}`; }).join('')}
      <div style="margin-bottom:16px"></div>
    `:''}
    ${c.dashboards.length>0?`
      <div class="section-divider">Live Dashboards</div>
      ${c.dashboards.map(d=>`
        <div class="embed-wrapper">
          <div class="embed-toolbar">
            <div style="overflow:hidden;flex:1">
              <div class="embed-title">üìä ${d.title}</div>
              <div class="embed-url-text">${d.url}</div>
            </div>
            <div class="embed-actions">
              <button class="dash-btn ghost" style="font-size:12px;padding:6px 12px" onclick="navigator.clipboard.writeText('${d.url}').then(()=>showToast('Link copied ‚úì'))">Copy Link</button>
              <button class="dash-btn ghost" style="font-size:12px;padding:6px 12px" onclick="shareDash('${d.title}','${d.url}')">‚Üó Share</button>
              <button class="dash-btn ghost" style="font-size:12px;padding:6px 12px;color:#C0392B;border-color:#C0392B" onclick="removeDash(${d.id})">Remove</button>
            </div>
          </div>
          <iframe src="${d.url}" allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
        </div>`).join('')}
    `:(c.files['Dashboard']?.length===0?`<div class="empty-state">No dashboards yet ‚Äî embed one or upload a file above.</div>`:'')}`;
}

function renderContacts() {
  const c=gc();
  const search=document.getElementById('search').value.toLowerCase();
  const contacts=c.contacts.filter(ct=>ct.name.toLowerCase().includes(search)||(ct.email||'').toLowerCase().includes(search));
  const avatarColors=["#1A5276","#6B8F71","#2E86C1","#148F77","#6E6F71"];
  document.getElementById('content').innerHTML = `
    <div class="contacts-grid">
      ${contacts.map((ct,i)=>`
        <div class="contact-card">
          <button class="contact-del" onclick="removeContact(${ct.id})">√ó</button>
          <div class="contact-avatar" style="background:${avatarColors[i%avatarColors.length]}">${ct.name.charAt(0).toUpperCase()}</div>
          <div class="contact-name">${ct.name}</div>
          <div class="contact-role">${ct.role||'‚Äî'}</div>
          ${ct.email?`<div class="contact-detail">‚úâ <a href="mailto:${ct.email}" style="color:var(--navy);text-decoration:none;font-weight:500">${ct.email}</a></div>`:''}
          ${ct.phone?`<div class="contact-detail">‚òé ${ct.phone}</div>`:''}
        </div>`).join('')}
      <div class="add-contact-card" onclick="openModal('contact-modal')">
        <span style="font-size:28px;color:var(--green)">+</span>
        Add Contact
      </div>
    </div>`;
}

function renderContracts() {
  const c=gc();
  const search=document.getElementById('search').value.toLowerCase();
  const contracts=c.contracts.filter(ct=>ct.name.toLowerCase().includes(search));
  const sc={signed:'status-signed',pending:'status-pending',draft:'status-draft'};
  const sl={signed:'Signed ‚úì',pending:'Pending',draft:'Draft'};
  document.getElementById('content').innerHTML = `
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px">
      ${[{label:'Total',val:c.contracts.length,icon:'üìã'},{label:'Signed',val:c.contracts.filter(x=>x.status==='signed').length,icon:'‚úÖ'},{label:'Pending',val:c.contracts.filter(x=>x.status==='pending').length,icon:'‚è≥'},{label:'Draft',val:c.contracts.filter(x=>x.status==='draft').length,icon:'‚úèÔ∏è'}]
        .map(s=>`<div class="stat-card" style="flex:1;min-width:90px">
          <div style="font-size:22px;margin-bottom:4px">${s.icon}</div>
          <div style="font-size:22px;font-weight:700;font-family:'Rajdhani',sans-serif;color:var(--navy)">${s.val}</div>
          <div style="font-size:11px;color:var(--text-muted);margin-top:2px;font-weight:600;text-transform:uppercase;letter-spacing:0.06em;font-family:'Rajdhani',sans-serif">${s.label}</div>
        </div>`).join('')}
    </div>
    ${contracts.length===0
      ?`<div class="empty-state">No contracts yet ‚Äî click "+ Add Contract" above.</div>`
      :contracts.map(ct=>`
        <div class="contract-row">
          <span style="font-size:20px">üìã</span>
          <div class="file-info">
            <div class="file-name">${ct.name}</div>
            <div class="file-meta">${ct.date?fmtDate(new Date(ct.date).getTime()):'No date'}${ct.value?' ¬∑ '+ct.value:''}</div>
          </div>
          <span class="status-badge ${sc[ct.status]}">${sl[ct.status]}</span>
          <div class="file-actions">
            <button class="small-btn" onclick="cycleStatus(${ct.id})" title="Cycle status" style="font-size:15px">‚Üª</button>
            <button class="small-btn red" onclick="removeContract(${ct.id})">√ó</button>
          </div>
        </div>`).join('')}`;
}

function renderFooter() {
  const total=clients.reduce((a,c)=>a+Object.values(c.files).flat().length+c.contacts.length+c.contracts.length+c.dashboards.length,0);
  document.getElementById('sidebar-footer').textContent=`${clients.length} clients ¬∑ ${total} items`;
}

function selectClient(id) { activeClient=id; activeFolder=gc().folders[0]; expandedFile=null; document.getElementById('search').value=''; render(); }
function selectFolder(f) { activeFolder=f; expandedFile=null; document.getElementById('search').value=''; render(); }
function toggleExpand(id) { expandedFile=expandedFile===id?null:id; renderContent(); }

function submitComment(fileId) {
  const input=document.getElementById(`cinput-${fileId}`);
  const text=input?.value?.trim(); if(!text) return;
  const c=gc(); const file=(c.files[activeFolder]||[]).find(f=>f.id===fileId); if(!file) return;
  if(!file.comments) file.comments=[];
  file.comments.push({author:"You",text,ts:Date.now()});
  renderFiles(); setTimeout(()=>document.getElementById(`cinput-${fileId}`)?.focus(),10);
}
function submitCommentInFolder(fileId,folder) {
  const input=document.getElementById(`cinput-${fileId}`);
  const text=input?.value?.trim(); if(!text) return;
  const c=gc(); const file=(c.files[folder]||[]).find(f=>f.id===fileId); if(!file) return;
  if(!file.comments) file.comments=[];
  file.comments.push({author:"You",text,ts:Date.now()});
  renderDashboard(); setTimeout(()=>document.getElementById(`cinput-${fileId}`)?.focus(),10);
}

function deleteClient(id) { clients=clients.filter(c=>c.id!==id); if(activeClient===id){activeClient=clients[0]?.id;activeFolder=gc()?.folders[0]||"Files";} render(); }

function showAddClientForm() {
  document.getElementById('add-area').innerHTML=`<div class="add-form"><input class="add-input" id="new-client-input" placeholder="Client name‚Ä¶" onkeydown="if(event.key==='Enter')submitClient();if(event.key==='Escape')render();" /><button class="add-submit" onclick="submitClient()">+</button></div>`;
  setTimeout(()=>document.getElementById('new-client-input')?.focus(),10);
}
function submitClient() {
  const name=document.getElementById('new-client-input')?.value?.trim(); if(!name) return;
  const colors=["#1A5276","#6B8F71","#2E86C1","#148F77","#6E6F71"];
  const c=makeClient(name,colors[clients.length%colors.length]);
  clients.push(c); activeClient=c.id; activeFolder=c.folders[0]; render();
}

function openModal(id) { document.getElementById(id).classList.add('show'); setTimeout(()=>document.querySelector(`#${id} .modal-input`)?.focus(),100); }
function closeModal(id) { document.getElementById(id).classList.remove('show'); }
document.querySelectorAll('.modal-overlay').forEach(el=>el.addEventListener('click',e=>{if(e.target===el)el.classList.remove('show');}));

function submitFolder() {
  const name=document.getElementById('new-folder-name').value.trim(); if(!name) return;
  const c=gc(); if(c.folders.includes(name)){showToast('Folder already exists!');return;}
  c.folders.push(name); c.files[name]=[]; activeFolder=name; closeModal('folder-modal'); render();
}
function submitContact() {
  const name=document.getElementById('c-name').value.trim(); if(!name) return;
  gc().contacts.push({id:Date.now(),name,role:document.getElementById('c-role').value.trim(),email:document.getElementById('c-email').value.trim(),phone:document.getElementById('c-phone').value.trim()});
  closeModal('contact-modal'); showToast('Contact added ‚úì'); render();
}
function removeContact(id) { gc().contacts=gc().contacts.filter(c=>c.id!==id); render(); }

function submitContract() {
  const name=document.getElementById('con-name').value.trim(); if(!name) return;
  gc().contracts.push({id:Date.now(),name,status:document.getElementById('con-status').value,value:document.getElementById('con-value').value.trim(),date:document.getElementById('con-date').value});
  closeModal('contract-modal'); showToast('Contract added ‚úì'); render();
}
function removeContract(id) { gc().contracts=gc().contracts.filter(c=>c.id!==id); render(); }
function cycleStatus(id) {
  const order=['draft','pending','signed'];
  const ct=gc().contracts.find(c=>c.id===id); if(!ct) return;
  ct.status=order[(order.indexOf(ct.status)+1)%order.length]; renderContracts();
}

function quickAddDash() {
  const title=document.getElementById('quick-dash-title')?.value.trim()||'Dashboard';
  const url=document.getElementById('quick-dash-url')?.value.trim(); if(!url){showToast('Please enter a URL');return;}
  gc().dashboards.push({id:Date.now(),title,url,added:Date.now()}); showToast('Dashboard embedded ‚úì'); renderDashboard(); renderHeader(); renderFolderTabs();
}
function submitDashUrl() {
  const title=document.getElementById('dash-title').value.trim()||'Dashboard';
  const url=document.getElementById('dash-url').value.trim(); if(!url) return;
  gc().dashboards.push({id:Date.now(),title,url,added:Date.now()}); closeModal('dash-modal'); showToast('Dashboard embedded ‚úì'); render();
}
function removeDash(id) { gc().dashboards=gc().dashboards.filter(d=>d.id!==id); render(); }
function shareDash(title,url) {
  const c=gc();
  const subject=encodeURIComponent(`${c.name} ‚Äî ${title}`);
  const body=encodeURIComponent(`Hi,\n\nHere's the dashboard for ${c.name}:\n\n${title}\n${url}\n\nBest,\nSingle Throw Marketing`);
  window.location.href=`mailto:?subject=${subject}&body=${body}`;
}

function handleFileInput(fileList) {
  const newFiles=Array.from(fileList).map(f=>({id:Date.now()+Math.random(),name:f.name,size:f.size,type:f.type,url:URL.createObjectURL(f),added:Date.now(),comments:[]}));
  const c=gc();
  const folder=activeFolder==='Contacts'||activeFolder==='Contracts'?'Files':activeFolder;
  if(!c.files[folder]) c.files[folder]=[];
  c.files[folder].push(...newFiles);
  showToast(`${newFiles.length} file(s) uploaded ‚úì`);
  if(activeFolder!==folder) activeFolder=folder;
  render();
}
function removeFile(id) { const c=gc(); c.files[activeFolder]=c.files[activeFolder].filter(f=>f.id!==id); if(expandedFile===id) expandedFile=null; render(); }
function removeFileFromFolder(id,folder) { const c=gc(); c.files[folder]=(c.files[folder]||[]).filter(f=>f.id!==id); if(expandedFile===id) expandedFile=null; renderDashboard(); }

function handleDragOver(e) { e.preventDefault(); const z=document.getElementById('drop-zone'); if(z){z.style.borderColor='var(--navy)';z.style.background='var(--navy-pale)';} }
function handleDragLeave() { const z=document.getElementById('drop-zone'); if(z){z.style.borderColor='var(--border-dark)';z.style.background='var(--white)';} }
function handleDrop(e) { e.preventDefault(); handleDragLeave(); handleFileInput(e.dataTransfer.files); }

function openShareModal() {
  const c=gc();
  document.getElementById('share-client-name').textContent=c.name;
  document.getElementById('share-link-text').textContent=`${window.location.href}?client=${encodeURIComponent(c.name)}`;
  document.getElementById('share-email').value='';
  openModal('share-modal');
}
function copyLink() { navigator.clipboard.writeText(document.getElementById('share-link-text').textContent).then(()=>showToast('Link copied! ‚úì')); }
function sendEmail() {
  const c=gc();
  const email=document.getElementById('share-email').value.trim();
  const allFiles=Object.entries(c.files).flatMap(([folder,files])=>files.map(f=>`  [${folder}] ${f.name}`));
  const subject=encodeURIComponent(`${c.name} ‚Äî Client Portal Summary`);
  const body=encodeURIComponent(`Hi,\n\nHere's a summary for ${c.name}:\n\nFiles:\n${allFiles.join('\n')||'  (none)'}\n\nContracts: ${c.contracts.length}\nContacts: ${c.contacts.length}\nDashboards: ${c.dashboards.length}\n\nBest regards,\nSingle Throw Marketing`);
  window.location.href=`mailto:${email}?subject=${subject}&body=${body}`;
  closeModal('share-modal');
}

function showToast(msg) { const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),2500); }

render();
</script>
</body>
</html>
